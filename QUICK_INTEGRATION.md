# Быстрая интеграция с вашим Telegram ботом

## Что нужно сделать

### 1. Установите зависимость
```bash
pip install requests
```

### 2. Скопируйте код в ваш бот

Скопируйте функции из файла `simple_integration_example.py` в ваш существующий бот:

- `authenticate_api()` - аутентификация в API
- `parse_telegram_order(text)` - парсинг заявки из текста
- `create_order_in_app(order_data)` - создание заявки в приложении
- `handle_telegram_message(message)` - обработка сообщения

### 3. Настройте параметры

В начале файла измените:
```python
API_URL = "https://web-production-7cfec.up.railway.app"
API_USERNAME = "admin"  # Ваш логин
API_PASSWORD = "admin"  # Ваш пароль
```

### 4. Интегрируйте в обработчик сообщений

В вашем боте найдите функцию обработки сообщений и добавьте:

```python
def message_handler(message):
    text = message.get("text", "")
    chat_id = message["chat"]["id"]
    
    # Ваш существующий код...
    
    # Добавьте эту проверку
    if "Груз:" in text and "→" in text:
        handle_telegram_message(message)
        return  # Прерываем дальнейшую обработку
    
    # Остальной код обработки сообщений...
```

### 5. Протестируйте

Запустите тест:
```bash
python simple_integration_example.py
```

## Формат заявки

Ваш бот должен отправлять заявки в таком формате:

```
Груз: Ижевск → Владимир

RUS, 1005 км
• Ижевск, Россия, 12 сен, пт
• Владимир (235 км от Нижний Новгород, Россия), Россия

2.6 т / - 
Стройматериалы, палеты — 5 шт., возм.догруз

Все закр.+изотерм
Загрузка, выгрузка: задняя

20000 руб  С НДС (19.9 руб/км)
16000 руб  Без НДС (15.9 руб/км)
Без торга

ФИРМА: ГК Ижсинтез (Солекс Доставка, ООО), Ижевск
Код в ATI.SU: 453700
рейтинг: 5 , р131

Андрей 
тел: +7(909)0607745 Билайн
тел: +7(912)7425245 МТС
e-mail: miroshkin.av@izhsintez.ru
факс +7 (3412) 507607

Ссылка на груз:
https://loads.ati.su/loadinfo/49e65551-a7a9-4af9-815f-84d269dbcda0?utm_source=atiapp
791
```

## Что извлекается автоматически

- **Направление**: "Ижевск → Владимир"
- **Вес**: "2.6 т"
- **Сумма**: "16000 руб Без НДС" (приоритет без НДС)
- **Компания**: "ГК Ижсинтез (Солекс Доставка, ООО), Ижевск"
- **Имя клиента**: "Андрей"
- **Телефон**: "+7(909)0607745"
- **Email**: "miroshkin.av@izhsintez.ru"
- **Номер машины**: "791"

## Готово!

После интеграции ваш бот будет автоматически:
1. Распознавать заявки в указанном формате
2. Парсить данные из текста
3. Создавать заявки в вашем приложении
4. Отправлять подтверждение пользователю

## Поддержка

Если что-то не работает:
1. Проверьте подключение к интернету
2. Убедитесь, что API доступен
3. Проверьте правильность логина/пароля
4. Посмотрите логи ошибок в консоли
