#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from telegram_bot import TelegramBot

# –¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏
test_text = """–ì—Ä—É–∑: –ò–∂–µ–≤—Å–∫ ‚Üí –í–ª–∞–¥–∏–º–∏—Ä

RUS, 1005 –∫–º
‚Ä¢ –ò–∂–µ–≤—Å–∫, –†–æ—Å—Å–∏—è, 12 —Å–µ–Ω, –ø—Ç
‚Ä¢ –í–ª–∞–¥–∏–º–∏—Ä (235 –∫–º –æ—Ç –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥, –†–æ—Å—Å–∏—è), –†–æ—Å—Å–∏—è

2.6 —Ç / - 
–°—Ç—Ä–æ–π–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø–∞–ª–µ—Ç—ã ‚Äî 5 —à—Ç., –≤–æ–∑–º.–¥–æ–≥—Ä—É–∑

–í—Å–µ –∑–∞–∫—Ä.+–∏–∑–æ—Ç–µ—Ä–º
–ó–∞–≥—Ä—É–∑–∫–∞, –≤—ã–≥—Ä—É–∑–∫–∞: –∑–∞–¥–Ω—è—è

20000 —Ä—É–±  –° –ù–î–° (19.9 —Ä—É–±/–∫–º)
16000 —Ä—É–±  –ë–µ–∑ –ù–î–° (15.9 —Ä—É–±/–∫–º)
–ë–µ–∑ —Ç–æ—Ä–≥–∞

–§–ò–†–ú–ê: –ì–ö –ò–∂—Å–∏–Ω—Ç–µ–∑ (–°–æ–ª–µ–∫—Å –î–æ—Å—Ç–∞–≤–∫–∞, –û–û–û), –ò–∂–µ–≤—Å–∫
–ö–æ–¥ –≤ ATI.SU: 453700
—Ä–µ–π—Ç–∏–Ω–≥: 5 , —Ä131

–ê–Ω–¥—Ä–µ–π 
—Ç–µ–ª: +7(909)0607745 –ë–∏–ª–∞–π–Ω
—Ç–µ–ª: +7(912)7425245 –ú–¢–°
e-mail: miroshkin.av@izhsintez.ru
—Ñ–∞–∫—Å +7 (3412) 507607

–°—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–∑:
https://loads.ati.su/loadinfo/49e65551-a7a9-4af9-815f-84d269dbcda0?utm_source=atiapp
791"""

def test_parser():
    bot = TelegramBot()
    
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞ –∑–∞—è–≤–æ–∫...")
    print("=" * 50)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–∞—Ä—Å–∏–Ω–≥
    order_data = bot.parse_order(test_text)
    
    if order_data:
        print("‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–∞!")
        print("\nüìã –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:")
        for key, value in order_data.items():
            print(f"  {key}: {value}")
    else:
        print("‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∑–∞—è–≤–∫–∏")
    
    print("\n" + "=" * 50)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
    print("üîê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏...")
    if bot.authenticate():
        print("‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!")
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
        if order_data:
            print("üì§ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏...")
            if bot.create_order(order_data):
                print("‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–µ!")
            else:
                print("‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏")
    else:
        print("‚ùå –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏")

if __name__ == "__main__":
    test_parser()
